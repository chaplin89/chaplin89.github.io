<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="apple-mobile-web-app-capable" content="yes"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title> Setup dm-verity on a minimal Debian installation | chaplinspace </title> <meta name="description" content=" Blog about hacking and other nasty things. "> <meta name="keywords" content="hacking, reverse-engineering, coding, programming"> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <!-- Social: Facebook / Open Graph --> <meta property="og:type" content="article"> <meta property="article:author" content="chaplin89"> <meta property="article:section" content=""> <meta property="article:tag" content=""> <meta property="article:published_time" content="2020-12-20 00:00:00 +0100"> <meta property="og:url" content="https://chaplin89.github.io/2020/Setup-dm-verity-on-a-minimal-debian-installation/"> <meta property="og:title" content=" Setup dm-verity on a minimal Debian installation | chaplinspace "> <meta property="og:image" content="https://chaplin89.github.io"> <meta property="og:description" content=" Blog about hacking and other nasty things. "> <meta property="og:site_name" content="chaplin89"> <meta property="og:locale" content="en_US"> <!-- Social: Twitter --> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content="chaplinspace"> <meta name="twitter:title" content=" Setup dm-verity on a minimal Debian installation | chaplinspace "> <meta name="twitter:description" content=" Blog about hacking and other nasty things. "> <meta name="twitter:image:src" content="https://chaplin89.github.io"> <!-- Social: Google+ / Schema.org --> <meta itemprop="name" content=" Setup dm-verity on a minimal Debian installation | chaplinspace "> <meta itemprop="description" content=" Blog about hacking and other nasty things. "> <meta itemprop="image" content="https://chaplin89.github.io"> <!-- Canonical link tag --> <link rel="canonical" href="https://chaplin89.github.io/2020/Setup-dm-verity-on-a-minimal-debian-installation/"> <link rel="alternate" type="application/rss+xml" title="chaplinspace" href="https://chaplin89.github.io/feed.xml"> <!-- rel prev and next --> <link href="https://chaplin89.github.io/assets/css/all.css" rel="stylesheet"> <link rel="stylesheet" href="https://chaplin89.github.io/assets/css/main.css"> <script text/javascript src="https://chaplin89.github.io/assets/js/jquery-3.4.1.slim.min.js" > </script> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ extensions: [ "MathMenu.js", "MathZoom.js", "AssistiveMML.js", "a11y/accessibility-menu.js" ], jax: ["input/TeX", "output/CommonHTML"], TeX: { extensions: [ "AMSmath.js", "AMSsymbols.js", "noErrors.js", "noUndefined.js", ] } }); </script> <!-- MathJax --> <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"> </script> <script> $(document).ready(function () { jQuery('.fa-bars').on('click', function () { jQuery('.left').toggleClass("active"); }); }); </script> </head> <body> <div class="wrapper"> <div class="header"> <h1 class="logo"><a href="https://chaplin89.github.io/">chaplin<span>space</span></a> </h1> <i class="fas fa-bars"></i> </div> <div class="left"> <header class="site-header"> <div class="container"> <h1 class="logo"><a href="https://chaplin89.github.io/">chaplin<span>space</span></a> </h1> <nav class="navbar"> <ul> <a href="https://chaplin89.github.io/"> <li>Home</li> </a> <a href="https://chaplin89.github.io/about"> <li>About me</li> </a> <a href="https://chaplin89.github.io/feed.xml" target="_blank"> <li>RSS</li> </a> </ul> </nav> <div class="intro"> <p class="lead">Hi, I'm Marco and this blog talks about hacking and other nasty things.</p> <a class="social" href="https://www.github.com/chaplin89"><i class="fab fa-github"></i></a> <div class="donation"> <a href="https://www.savethechildren.org/us/about-us/why-save-the-children"> Did I help? Click here to know what to do. </a> </div> </div> </div> </header> </div> <div class="main"> <article class="post container" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header"> <p class="post-meta"><time datetime="2020-12-20T00:00:00+01:00" itemprop="datePublished">Dec 20, 2020</time></p> <h1 class="post-title" itemprop="name headline">Setup dm-verity on a minimal Debian installation</h1> </header> <div class="post-content" itemprop="articleBody"> <ul id="toc" class="section-nav"> <li class="toc-entry toc-h1"><a href="#1---system-installation">1 - System installation</a></li> <li class="toc-entry toc-h1"><a href="#2---move-boot-to-another-partition">2 - Move /boot to another partition</a></li> <li class="toc-entry toc-h1"><a href="#3---recompile-the-kernel">3 - Recompile the kernel</a></li> <li class="toc-entry toc-h1"><a href="#4---root-in-read-only">4 - root in read-only</a></li> <li class="toc-entry toc-h1"><a href="#41---squashfs-alternative-to-step-42">4.1 - squashfs (alternative to step 4.2)</a></li> <li class="toc-entry toc-h1"><a href="#42---etx4-alternative-to-step-41">4.2 - etx4 (alternative to step 4.1)</a></li> <li class="toc-entry toc-h1"><a href="#5---activation-of-dm-verity">5 - Activation of dm-verity</a></li> <li class="toc-entry toc-h1"><a href="#6---make-it-bootable">6 - Make it bootable</a></li> <li class="toc-entry toc-h1"><a href="#references">References</a></li> </ul><p>DM-verity is a technology (or better, a “device-mapper target”) that provides integrity checking on block devices using a cryptographic digest supplied by the kernel crypto API.</p> <h1 id="1---system-installation"> <a class="anchor" href="#1---system-installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>1 - System installation</h1> <p>To make dm-verity works, the system should be able to work with a read-only root. As a playground, it is possible to use a minimal Debian installation on a VM. At first, create a VM with at least 10GB of space and install Debian. Download and connect to the machine Debian-netinst, then start the VM and install Debian. Pay attention to select “Separate /home /var and /tmp on partitions”, as shown in the image below.</p> <p><img src="/assets/images/dmverity/1%20-%20Install%20-%20Configure%20partitions.png" alt="Configure partition" class="center-image"></p> <p>To speed up the process, it is possible to leave all the default options to not install a desktop manager, as shown in the image below.</p> <p><img src="/assets/images/dmverity/2%20-%20Install%20-%20Features.png" alt="Install features" class="center-image"></p> <p>Once the system is installed, boot it.</p> <h1 id="2---move-boot-to-another-partition"> <a class="anchor" href="#2---move-boot-to-another-partition" aria-hidden="true"><span class="octicon octicon-link"></span></a>2 - Move /boot to another partition</h1> <p>Once dm-verity will be activated, the kernel will need to have the file-system’s root hash to verify that the system is integer. The root hash cannot be stored in the root partition, as it is indeed the result of the hashing of the root partition.</p> <p>To make things work, a separate partition for the boot image is also needed. Alternatively, during installation, it is possible to configure a manual partition layout and specify from the beginning that <code class="language-plaintext highlighter-rouge">/boot</code> has to be in a different partition.</p> <p>The most straightforward approach is to connect another disk to the virtual machine manager (500MB is enough). This guide will assume this is /dev/sdb. Once connected the 2nd hard-disk, run:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Get a shell as root </span>
<span class="nb">sudo </span>su -

<span class="c"># Make the partition /dev/sdb1</span>
fdisk /dev/sdb
<span class="c"># Press, in order: n, p, 1, (enter), (enter), w</span>
</code></pre></div></div> <p>At the end the situation should be this:</p> <p><img src="/assets/images/dmverity/3%20-%20fdisk%20output.png" alt="fdisk Output" class="center-image"></p> <p>Configure the partition and update <code class="language-plaintext highlighter-rouge">fstab</code>:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Format the partition with </span>
<span class="nb">sudo </span>mkfs.ext4 /dev/sdb1
<span class="c"># Mount the partition</span>
<span class="nb">mkdir </span>new_boot
mount /dev/sdb1 ./new_boot
<span class="c"># Copy the content from /boot to ./new_boot, preserving permissions</span>
<span class="nb">cp</span> <span class="nt">-rp</span> /boot/<span class="k">*</span> ./new_boot/
<span class="c"># Append the output of blkid /dev/sdb1 (containing the UUID of /dev/sdb1) to /etc/fstab</span>
blkid /dev/sdb1 <span class="o">&gt;&gt;</span> /etc/fstab
<span class="c"># Modify /etc/fstab to create a proper entry with this UUID</span>
vim /etc/fstab
</code></pre></div></div> <p>At this point, if the UUID of <code class="language-plaintext highlighter-rouge">/dev/sdb1</code> is <code class="language-plaintext highlighter-rouge">a564f019-b80e-41c8-a993-05cf1369ad81</code>, <code class="language-plaintext highlighter-rouge">/etc/fstab</code> should look like this:</p> <p><img src="/assets/images/dmverity/4%20-%20fstab%20-%20boot.png" alt="fstab boot" class="center-image"></p> <p>Once <code class="language-plaintext highlighter-rouge">/etc/fstab</code> is updated, it is needed to reconfigure grub:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Update grub with the right root and prefix</span>
update-grub
<span class="c"># Install grub also to the disk that contains the /boot partition</span>
grub-install /dev/sdb
</code></pre></div></div> <p>The output should look like this:</p> <p><img src="/assets/images/dmverity/5%20-%20Grub%20update.png" alt="grun update" class="center-image"></p> <p>To avoid a clash between the old /boot and the new boot:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Rename /boot to /old_boot</span>
<span class="nb">mv</span> /boot /old_boot
<span class="c"># Create a new directory that will be used by fstab/udev to mount the boot partition</span>
<span class="nb">mkdir</span> /boot
</code></pre></div></div> <p>At this point, it is possible to reboot the system. The last step is to reconfigure the VM manager’s BIOS to boot the 2nd disk first.</p> <p>After boot, you can make sure that everything is working by running the command mount without arguments. The output should look like this:</p> <p><img src="/assets/images/dmverity/6%20-%20Mount%20command.png" alt="mount command" class="center-image" width="1091" height="767"></p> <p>It is possible to see that <code class="language-plaintext highlighter-rouge">/dev/sdb1</code> is mounted in <code class="language-plaintext highlighter-rouge">/boot</code>.</p> <h1 id="3---recompile-the-kernel"> <a class="anchor" href="#3---recompile-the-kernel" aria-hidden="true"><span class="octicon octicon-link"></span></a>3 - Recompile the kernel</h1> <p>To use as root a mapper device, it is needed to mount it before the init execution.</p> <p>It is possible to do this in 2 ways:</p> <ol> <li>By altering the script /init of the initramfs to make it configure the mapper</li> <li>By specifying a parameter to the kernel that will instruct the kernel to do everything by itself</li> </ol> <p>It is needed to recompile the component in both cases since, by default, neither busybox nor the kernel on a plain Debian 10 installation supports what is required to create the device.</p> <p>The kernel needs to be upgraded from the version 4.* that Debian 10 is using since the option that is needed is available starting from Linux 5.1. It is possible to upgrade the kernel by adding the backport repository to APT.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>su -

<span class="c"># Add buster-backports to sources.list and download/decompress kernel source code</span>
<span class="nb">echo </span>deb https://deb.debian.org/debian buster-backports main <span class="o">&gt;&gt;</span> /etc/apt/sources.list
<span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>kernel-source-5.9 kernel-config-5.9
<span class="nb">tar</span> <span class="nt">-xaf</span> /usr/src/linux-source-5.9.tar.xz
<span class="nb">cd </span>linux-source-5.9

<span class="c"># Alternatively, download the latest kernel from linux.org</span>
https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.10.7.tar.xz
<span class="nb">tar</span> <span class="nt">-xaf</span> /usr/src/linux-5.10.7.tar.xz
<span class="nb">cd </span>Linux-5.10.7

<span class="c"># At this point, either:</span>
<span class="c">#    1) Use the Debian config (from kernel-config-5.9 package) that is very bloated, </span>
<span class="c">#       slow to compile and require a lot of space but require less tuning</span>
zcat /usr/src/linux-config-5.9/config.amd64_none_amd64.xz <span class="o">&gt;&gt;</span> ./.config
make oldconfig

<span class="c"># Or 2) Start from a default config and add what is needed to make it bootable later</span>
make x86_64_defconfig

<span class="c"># Install prerequisites to build the kernel</span>
<span class="nb">sudo </span>apt-get <span class="nb">install </span>build-essential bc kmod cpio flex libncurses5-dev libelf-dev libssl-dev bison

<span class="c"># Open menuconfig</span>
make menuconfig

<span class="c"># Find the following options in the menuconfig and change them as described:</span>
<span class="c">#    Device Drivers → Multiple devices driver support (RAID and LVM) →  Device mapper support → change to * (YES)</span>
<span class="c">#    Device Drivers → Multiple devices driver support (RAID and LVM) →  Device mapper support → DM "dm-mod.create=" parameter support → change to * (YES)</span>
<span class="c">#    Device Drivers → Multiple devices driver support (RAID and LVM) →  Device mapper support → Verity target support → change to * (YES)</span>
<span class="c">#    File systems → Miscellaneous file-systems → SquashFS 4.0 - Squashed file system support → change to * (YES)</span>
<span class="c"># If you're starting from x86_64_defconfig, at this point, add what you need to make the kernel work on your VM manager.</span>
<span class="c"># For example, on VM Ware 16, the SCSI controller driver is missing:</span>
<span class="c">#    Device Drivers → Fusion MPT driver support → Change to * (YES)</span>
<span class="c">#    Device Drivers → Fusion MPT driver support → Fusion MPT ScsiHost driver → Change to * (YES)</span>
<span class="c"># Instead, if you started from Debian config, remember to disable change the following option:</span>
<span class="c">#    Cryptographic API → Certificate for signature checking → Provide system-wide ring of trusted keys → Set it to ""</span>

<span class="c"># Compile and install the new kernel</span>
make <span class="nt">-j8</span>
<span class="nb">sudo </span>make modules_install
<span class="nb">sudo </span>make <span class="nb">install</span>
</code></pre></div></div> <p>After this, it is possible to reboot the system and make sure everything is working properly.</p> <p>Optionally, it is possible to clean the system from temporary files and install/configure other tools, since starting from the next step, the system will be read-only.</p> <h1 id="4---root-in-read-only"> <a class="anchor" href="#4---root-in-read-only" aria-hidden="true"><span class="octicon octicon-link"></span></a>4 - root in read-only</h1> <p>Now it is needed to setup the root file-system as read-only to proceed with the activation of dm-verity. This section is divided into two parts, depending on the file-system chosen.</p> <h1 id="41---squashfs-alternative-to-step-42"> <a class="anchor" href="#41---squashfs-alternative-to-step-42" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.1 - squashfs (alternative to step 4.2)</h1> <p>To create a squashfs file-system, boot from a Live Linux and mount the root file-system and the home partition:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>su -
<span class="nb">mkdir</span> ./root
<span class="nb">mkdir</span> ./home
mount /dev/sda1 ./root
mount /dev/sda8 ./home
Install the tools that will be used:

apt update
apt <span class="nb">install </span>squashfs-tools cryptsetup-bin vim 
Create the squashfs image:

mksquashfs ./root ./home/root.squashfs
<span class="c"># Unsquash it again to make it easy to modify and repack the file-system</span>
<span class="nb">cd </span>home
unsquashfs ./root.squashfs
<span class="c"># Edit fstab to make it mount the squashfs partition as root</span>
vim ./home/squashfs-root/etc/fstab
<span class="c"># The squashfs image needs to be flashed somewhere. This place can be /dev/sda1, but, in this case, if there are some mistakes, the system won't boot anymore. Another solution is to create and plug another disk.</span>
</code></pre></div></div> <p>Supposing the chosen disk where to flash the image is <code class="language-plaintext highlighter-rouge">/dev/sda1</code>, fstab will look like this:</p> <p><img src="/assets/images/dmverity/7%20-%20fstab%20-%20squashfs.png" alt="fstab squashfs" class="center-image"></p> <p>Now it is possible to repack the image again and flash it:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">rm </span>root.squashfs
mksquashfs ./squashfs-root/ ./root.squashfs
<span class="nb">dd </span><span class="k">if</span><span class="o">=</span>./root.squashfs <span class="nv">of</span><span class="o">=</span>/dev/sda1
<span class="nb">sync</span>
</code></pre></div></div> <h1 id="42---etx4-alternative-to-step-41"> <a class="anchor" href="#42---etx4-alternative-to-step-41" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.2 - etx4 (alternative to step 4.1)</h1> <p>For ext4, to put the root in read-only, inside <code class="language-plaintext highlighter-rouge">/etc/fstab</code> change the 4th column of the line related to <code class="language-plaintext highlighter-rouge">/</code>to specify only “ro”. At the end, the file should look like this:</p> <p><img src="/assets/images/dmverity/8%20-%20fstab%20-%20ro%20root.png" alt="fstab ro rooot" class="center-image"></p> <p>Reboot the system. Make sure everything is working trying to create a directory in /. The operations should fail:</p> <p><img src="/assets/images/dmverity/9%20-%20mkdir%20output.png" alt="mmkdir output" class="center-image"></p> <h1 id="5---activation-of-dm-verity"> <a class="anchor" href="#5---activation-of-dm-verity" aria-hidden="true"><span class="octicon octicon-link"></span></a>5 - Activation of dm-verity</h1> <p>At this point, everything is ready to enable dm-verity. This operation can be done if the root partition is not mounted; otherwise, it will fail. Because of this, it is important to boot from a live system.</p> <p>Since dm-verity needs to store this hash-tree somewhere, the most simple thing is to create another hard-disk where to store this information. Making a hard-disk of 1GB is enough for this purpose. This tutorial will assume that this disk is <code class="language-plaintext highlighter-rouge">/dev/sdc</code>.</p> <p>After the new hard disk is created and connected to the system, proceed to partition it as shown before, running:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fdisk /dev/sdc
<span class="c"># Press, in order, n, p, 1, (enter), (enter), w</span>
</code></pre></div></div> <p>There are two possible approaches to enable dm-verity:</p> <ol> <li>The first is with the use of dmsetup, a tool used to create a mapper device. Since it is possible to use a mapper for different purposes, this tool is not specific for dm-verity and must be invoked in a certain way to enable the usage of dm-verity.</li> <li>The second is with the use of veritysetup, which is a more high-level tool that can configure a device-mapper device that is specific for dm-verity. Under the hood is doing the same thing as dmsetup, but it’s easier to use since it’s made for dmverity.</li> </ol> <p>This tutorial will use the second approach.</p> <p>Mount a writable partition as general-purpose storage, for example, the <code class="language-plaintext highlighter-rouge">/home</code> partition (it will be needed later):</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>storage
mount /dev/sda8 ./storage
</code></pre></div></div> <p>Create the hash tree and save the root hash into the storage:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ./storage
veritysetup format /dev/sda1 /dev/sdc1 <span class="o">&gt;</span> output_veritysetup
</code></pre></div></div> <p>The content of output should be something like this:</p> <p><img src="/assets/images/dmverity/10%20-%20veritysetup%20format%20-%20output.png" alt="veritysetup format output" class="center-image"></p> <p>To simplify subsequent steps, create a <code class="language-plaintext highlighter-rouge">root_hash</code> file and copy into that only the real root hash (remove other output from <code class="language-plaintext highlighter-rouge">veritysetup</code>):</p> <p><img src="/assets/images/dmverity/11%20-%20root_hash.png" alt="root hash" class="center-image"></p> <p>At this point, it is possible to test that everything is working properly by creating the device-mapper device and test it:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>veritysetup create vroot /dev/sda1 /dev/sdc1 <span class="si">$(</span><span class="nb">cat </span>root_hash<span class="si">)</span>
<span class="c"># Ensure the system is integer</span>
veritysetup verify /dev/sda1 /dev/sdc1 <span class="si">$(</span><span class="nb">cat </span>root_hash<span class="si">)</span> <span class="c"># It will take a while. If no output is produced, it means everything is OK</span>
<span class="c"># Mount the partition with dm-verity enabled</span>
<span class="nb">mkdir </span>verity-root
mount /dev/mapper/root ./verity-root
</code></pre></div></div> <p>Output will look like this:</p> <p><img src="/assets/images/dmverity/12%20-%20mount%20mapper%20device.png" alt="mount mapper device" class="center-image"></p> <p>At this point, verity-root contains the mounted root file-system with dm-verity enabled. Every change to the file-system will corrupt dm-verity hash-tree and make the system unusable.</p> <h1 id="6---make-it-bootable"> <a class="anchor" href="#6---make-it-bootable" aria-hidden="true"><span class="octicon octicon-link"></span></a>6 - Make it bootable</h1> <p>At this point, the only part that is left is to tell the kernel to create/use the device mapper. To do this, it is possible to use the kernel argument “dm-mod.create” and change the root argument.</p> <p>dm-mod.create accept as parameter the mapper table that we can obtain easily with the output of the command dmsetup table:</p> <p><img src="/assets/images/dmverity/13%20-%20dmsetup%20table.png" alt="dmsetup table" class="center-image"></p> <p>What it is needed to specify to dm-mod.create is an argument that takes the shape of <code class="language-plaintext highlighter-rouge">&lt;name&gt;,&lt;uuid&gt;,&lt;minor&gt;,&lt;flags&gt;,&lt;output of dmsetup table&gt;</code>:</p> <ul> <li>name: Name of the mapping that udev will assign after boot so that the device-mapper could be found <code class="language-plaintext highlighter-rouge">/dev/mapper/&lt;name&gt;</code> </li> <li>uuid: optional UUID to assign to the device-mapper after creation</li> <li>minor: minor of the dm device to make it possible to find it in <code class="language-plaintext highlighter-rouge">/dev/dm-&lt;minor&gt;</code> </li> <li>flags: flags, like read-only</li> <li>output of dmsetup table: literally the output of dmsetup table without the first part that contains the name of the mapping followed by a colon</li> </ul> <p>After putting together these information, we can put the argument inside <code class="language-plaintext highlighter-rouge">/boot/grub/grub.cfg</code>. The final line related to the kernel loading will look like this:</p> <p><img src="/assets/images/dmverity/14%20-%20grub%20cfg.png" alt="grub cfg" class="center-image"></p> <p>Note that the root argument has been changed to map the new device: <code class="language-plaintext highlighter-rouge">/dev/dm-&lt;minor&gt;</code>. Pay attention when updating grub as the modification <code class="language-plaintext highlighter-rouge">/boot/grub/grub.cfg</code> will be lost. To make a permanent modification, edit the default grub config file inside <code class="language-plaintext highlighter-rouge">/etc</code>.</p> <p>At this point, it is possible to reboot the system. After rebooting the output of <code class="language-plaintext highlighter-rouge">mount | grep root</code> and <code class="language-plaintext highlighter-rouge">dmsetup</code> table should look like this:</p> <p><img src="/assets/images/dmverity/15%20-%20mount%20-%20dmsetup.png" alt="mount dmsetup" class="center-image"></p> <h1 id="references"> <a class="anchor" href="#references" aria-hidden="true"><span class="octicon octicon-link"></span></a>References</h1> <ol> <li><a href="https://www.kernel.org/doc/html/latest/admin-guide/device-mapper/index.html">Kernel documentation - Device Mapper</a></li> <li><a href="https://gitlab.com/cryptsetup/cryptsetup/-/wikis/DMVerity">Cryptsetup documentation - dmverity</a></li> <li><a href="https://www.kynetics.com/docs/2018/introduction-to-dm-verity-on-android/">Introduction on dm-verity on Android</a></li> <li><a href="https://access.redhat.com/documentation/it-it/red_hat_enterprise_linux/6/html/logical_volume_manager_administration/device_mapper">RedHat documentation - LVM - Device mapper</a></li> <li><a href="https://wiki.gentoo.org/wiki/Device-mapper">Gentoo documentation - Device mapper</a></li> <li><a href="https://magazine.odroid.com/article/using-squashfs-as-a-read-only-root-file-system/">squashfs as read-only filesystem</a></li> <li><a href="https://source.android.com/security/verifiedboot/avb">Android documentation - Android verified boot</a></li> <li><a href="https://bootlin.com/pub/conferences/2018/elc/josserand-schulz-secure-boot/josserand-schulz-secure-boot.pdf#4">Bootlin - Verified boot</a></li> <li><a href="https://docs.openstack.org/security-guide/management/integrity-life-cycle.html">Integrity lifecycle</a></li> </ol> <aside class="share"> <p>If you liked this article and think others should read it, please share it on <a href="http://twitter.com/share?text=Setup dm-verity on a minimal Debian installation&amp;url=https://chaplin89.github.io/2020/Setup-dm-verity-on-a-minimal-debian-installation/&amp;via=chaplinspace" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">Twitter</a> or <a href="https://www.facebook.com/sharer/sharer.php?u=https://chaplin89.github.io/2020/Setup-dm-verity-on-a-minimal-debian-installation/" onclick="window.open(this.href, 'facebook-share', 'width=550,height=235');return false;">Facebook</a>.</p> </aside> </div> </article> <aside id="comments" class="disqus"> <div class="container"> <h3><i class="icon icon-comments-o"></i> Comments</h3> <div id="disqus_thread"></div> <script type="text/javascript"> var disqus_shortname = 'chaplin89-github-io'; var disqus_identifier = '/2020/Setup-dm-verity-on-a-minimal-debian-installation'; var disqus_title = 'Setup dm-verity on a minimal Debian installation'; var disqus_url = 'https://chaplin89.github.io/2020/Setup-dm-verity-on-a-minimal-debian-installation/'; /*var disqus_developer = 1;*/ (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> <noscript> Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a> </noscript> </div> </aside> </div> </div> <script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-141216446-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script> </body> </html>
